

<div id="output">Loading...</div>
<div id="output2"></div>

<table border="1">
  <thead>
    <tr>
      <th>Name</th>
      <th>Waste (kg)</th>
    </tr>
  </thead>
  <tbody id="tableBody"></tbody>
</table>

<script>
fetch("http://localhost:3000/clients/waste")
  .then(r => r.json())
  .then(data => {
    const tbody = document.getElementById("tableBody");

    data.forEach(c => {
      const row = document.createElement("tr");
    //   const client_name = {c.name};
      row.innerHTML = `<td>${c.CL_name}</td><td>${c.total_tpa}</td>`;
      tbody.appendChild(row);
    });
  });
</script>

<script>
fetch("http://localhost:3000/clients/waste")
  .then(r => r.json())
  .then(data => {
    console.log(data); // still logs in DevTools

    // Show raw JSON on the page
    document.getElementById("output").textContent = "clients\\waste = " +
      JSON.stringify(data, null, 2);
  })
  .catch(err => {
    document.getElementById("output").textContent = "Error loading data";
    console.error(err);
  });
</script>



<script>
fetch("http://localhost:3000/clients/waste")
  .then(r => r.json())
  .then(data => {
    const output = document.getElementById("output2");

    data.forEach(client => {
      const div = document.createElement("div");
      div.textContent = `${client.CL_name}: ${client.total_tpa} kg`;
      output.appendChild(div);
    });
  });
</script>
